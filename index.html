<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Patient Profile – Prototype (Primary Caregiver / Informal Support / Emergency Contact)</title>
  <link rel="icon" href="favicon.ico" />
  <link rel="stylesheet" href="css/tokens.css" />
  <link rel="stylesheet" href="css/base.css" />
	  <link rel="stylesheet" href="css/buttons.css" />
	  <link rel="stylesheet" href="css/forms.css" />
	  <link rel="stylesheet" href="css/view.css" />
	  <link rel="stylesheet" href="css/specs.css" />
	  <link rel="stylesheet" href="css/overlays.css" />
	</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="badge">Patient Profile <small>prototype</small></div>
        <div class="pill" id="reqPill">Mode: Referral</div>
      </div>

	      <div class="toggle">
	        <div class="hint">Patient type affects validation:<br><b>Referral</b> vs <b>Existing</b></div>
	        <div class="seg" role="tablist" aria-label="Patient type">
	          <button id="btnReferral" class="active" type="button">Referral</button>
	          <button id="btnExisting" type="button">Existing</button>
	        </div>
	        <button class="btn" id="specToggleBtn" type="button" aria-pressed="false">Hide Specs</button>
	      </div>
	    </div>

    <div class="grid">
      <div>
        <!-- Primary Caregiver -->
        <section class="card" id="cardPrimary">
          <div class="card-h">
            <div class="title">
              <div class="titleLine">
                <h2>Primary Caregiver</h2>
                <span class="info" tabindex="0" aria-label="Primary Caregiver info">i
                  <span class="infoTip">A person who advocates for a patient and is a decision maker and can also have a POA. In certain cases can also be patient’s DCW</span>
                </span>
              </div>
            </div>
            <div class="actions">
              <button class="btn" id="pcEditBtn" type="button">Edit</button>
            </div>
          </div>
          <div class="body" id="pcBody"></div>
        </section>

        <div style="height:16px"></div>

	        <!-- Informal Support -->
	        <section class="card" id="cardInformal">
	          <div class="card-h">
	            <div class="title">
	              <div class="titleLine">
                <h2>Informal Support</h2>
                <span class="info" tabindex="0" aria-label="Informal Support info">i
                  <span class="infoTip">Any person who can help in case if patients DCW is temporarily unavailable; cannot be patient’s DCW</span>
                </span>
              </div>
            </div>
            <div class="actions">
              <button class="btn" id="isEditBtn" type="button">Edit</button>
            </div>
          </div>
	          <div class="body" id="isBody"></div>
	        </section>

	        <div style="height:16px"></div>

	        <!-- Emergency Contact -->
	        <section class="card" id="cardEmergency">
	          <div class="card-h">
	            <div class="title">
	              <div class="titleLine">
	                <h2>Emergency Contact</h2>
	                <span class="info" tabindex="0" aria-label="Emergency Contact info">i
	                  <span class="infoTip">A trusted person (family, friend, etc.) designated by the patient to be notified by healthcare providers or first responders in a medical crisis</span>
	                </span>
	              </div>
	            </div>
	            <div class="actions">
	              <button class="btn" id="ecEditBtn" type="button">Edit</button>
	            </div>
	          </div>
	          <div class="body" id="ecBody"></div>
	        </section>

	        <div style="height:16px"></div>

	        <!-- DCW Assignment -->
	        <section class="card" id="cardAssign">
	          <div class="card-h">
	            <div class="title">
              <div class="titleLine">
                <h2>DCW Assignment</h2>
              </div>
            </div>
            <div class="actions">
              <button class="btn" id="daEditBtn" type="button">Edit</button>
            </div>
	          </div>
	          <div class="body" id="daBody"></div>
	        </section>

	        <div style="height:16px"></div>

	        <!-- Candidates Assignment -->
	        <section class="card" id="cardCandidates">
	          <div class="card-h">
	            <div class="title">
	              <div class="titleLine">
	                <h2>Candidate DCW Assignment</h2>
	              </div>
	            </div>
	            <div class="actions">
	              <button class="btn" id="caEditBtn" type="button">Edit</button>
	            </div>
	          </div>
	          <div class="body" id="caBody"></div>
	        </section>
	      </div>

	      <!-- Specifications -->
		      <aside class="card specs">
		        <div class="card-h">
		          <div class="title">
		            <h2>Specifications</h2>
		            <p class="sub">Prototype requirements</p>
		          </div>
		          <div class="actions">
		            <button class="btn" id="specCollapseAllBtn" type="button">Collapse all</button>
		          </div>
		        </div>
		        <div class="body">
		          <div class="specIntro">
		            This panel documents prototype requirements and expected behaviors for each section.
		          </div>

		          <details class="spec" open>
		            <summary>Global behavior</summary>
		            <div class="specBody">
		              <h4>Patient Type</h4>
		              <ul>
		                <li><b>Referral</b> is permissive: some sections may be saved empty (e.g., Emergency Contact).</li>
		                <li><b>Existing</b> is strict: required rules are enforced and empty-required sections show a warning in view mode.</li>
		              </ul>

		              <h4>Modes</h4>
		              <ul>
		                <li><b>View mode</b> shows a read-only table when data exists; if the section is empty, it shows <b>None</b> (Assignments show <b>No DCWs</b>/<b>No Candidates</b>).</li>
		                <li><b>Edit mode</b> shows interactive fields and the section footer (Apply/Cancel and any remove actions).</li>
		                <li><b>Cancel</b> returns to view mode; if changes exist, a confirmation modal is shown.</li>
		              </ul>

		              <h4>Validation UX</h4>
		              <ul>
		                <li>On Apply, validation failures <b>do not open a modal</b>; invalid fields are highlighted and the UI scrolls to the first error.</li>
		                <li>Each field reserves one line under the control for inline validation messages (to avoid layout jumping).</li>
		              </ul>

		              <h4>Input Rules</h4>
		              <ul>
		                <li>Email fields strip spaces and must be a valid email format when provided.</li>
		                <li>ZIP and phone fields accept digits only in this prototype.</li>
		              </ul>

		              <h4>Directory Search (Typeahead)</h4>
		              <ul>
		                <li>Typeahead results display <b>Email</b> first and <b>Full Name</b> second (stacked).</li>
		                <li>Pressing <b>Enter</b> keeps the typed value without auto-selecting a match (“create new” behavior).</li>
		                <li>Clicking the “×” clears the input; for DCW-linked fields this may trigger a confirmation modal.</li>
		              </ul>

		              <h4>Specifications Panel</h4>
		              <ul>
		                <li>This panel is an accordion: opening one item collapses the previously open item.</li>
		                <li>Use <b>Hide Specs</b> in the top bar to collapse this panel and widen the working area.</li>
		              </ul>

		              <h4>Standard Modals (Copy)</h4>
		              <ul>
		                <li>Unsaved changes: Title “Unsaved changes”, text “Do you want to save changes or cancel everything?”, buttons “Save Changes” / “Cancel Changes”.</li>
		                <li>Clear selected DCW: Title “Clear selected DCW”, text “Are you sure you want to clear selected DCW? This action will clear all the fields”, buttons “Proceed” / “Cancel”.</li>
		              </ul>
		            </div>
		          </details>

		          <details class="spec">
		            <summary>1) Primary Caregiver</summary>
		            <div class="specBody">
		              <h4>Purpose</h4>
		              <ul>
		                <li>Capture a Primary Caregiver contact and optionally link it to an existing DCW directory record.</li>
		              </ul>

		              <h4>View Mode</h4>
		              <ul>
		                <li>When empty, the section shows <b>None</b>.</li>
		                <li>When filled, the section shows a table; empty optional values render as “–”.</li>
		                <li>For <b>Existing</b>, an empty Primary Caregiver (without an explicit “remove”) shows a warning banner.</li>
		              </ul>

		              <h4>Edit Mode</h4>
		              <ul>
		                <li>Shows tip text above fields: “Start by entering a name or email. You can select an existing DCW contact, or enter new information to add a Primary Caregiver”.</li>
		                <li>Apply saves and returns to view mode; Cancel prompts if there are unsaved changes.</li>
		                <li>Remove Primary Caregiver appears once any field has content and returns to empty view state after confirmation.</li>
		              </ul>

		              <h4>Required Fields</h4>
		              <ul>
		                <li>Required: Name, Relationship, ZIP, City, County, State, Cell phone.</li>
		                <li>Address required only for <b>Existing</b>; optional for <b>Referral</b>.</li>
		                <li>Email is optional; if provided it must be a valid email format.</li>
		              </ul>

		              <h4>Directory Attach</h4>
		              <ul>
		                <li>Name supports DCW lookup by name/email; selecting a DCW hydrates contact fields and disables Email search until cleared.</li>
		                <li>Email supports DCW lookup by email; selecting a DCW hydrates contact fields but does not lock Email.</li>
		                <li>Pressing Enter without selecting a match keeps the typed value and does not attach a DCW.</li>
		                <li>Clearing Name or Email via “×” when a DCW is attached prompts: “Are you sure you want to clear selected DCW? This action will clear all the fields”.</li>
		                <li>Remove modal copy: Title “Remove Primary Caregiver”, text “Do you want to remove Primary Caregiver?”, buttons “Remove” / “Cancel”.</li>
		              </ul>
		            </div>
		          </details>

		          <details class="spec">
		            <summary>2) Informal Support</summary>
		            <div class="specBody">
		              <h4>Purpose</h4>
		              <ul>
		                <li>Capture whether the patient has an Informal Support person, refuses agency staffing, or accepts agency staffing.</li>
		              </ul>

		              <h4>View Mode</h4>
		              <ul>
		                <li>Default shows <b>None</b> when no option is selected.</li>
		                <li>When Selection = “Add Informal Support”, the table shows the saved contact info; empty optional values render as “–”.</li>
		                <li>When Selection = “Refuse Agency Staffing” or “Agency Staffing”, only the selection value is shown.</li>
		              </ul>

		              <h4>Edit Mode</h4>
		              <ul>
		                <li>Shows tip text above options: “Select whether a patient has Informal Support person, agrees or refuses agency staffing. If you choose ‘Person’, enter their contact info.”</li>
		                <li>Selection radios: Add Informal Support / Refuse Agency Staffing / Agency Staffing.</li>
		                <li>When Selection is not “Add Informal Support”, contact fields are hidden.</li>
		              </ul>

		              <h4>Required Fields</h4>
		              <ul>
		                <li>For <b>Existing</b>, Selection is required; for <b>Referral</b>, Selection may be empty.</li>
		                <li>When Selection = “Add Informal Support”, required: Name, Address, ZIP, City, State, Cell phone.</li>
		                <li>County, Home phone, Work phone are optional.</li>
		              </ul>

		              <h4>Modals</h4>
		              <ul>
		                <li>If the user entered any contact info under “Add Informal Support” and then switches to another option, show: “Are you sure you want to change to …? This action will clear all the fields” with Accept/Cancel.</li>
		                <li>Cancel from edit mode prompts if there are unsaved changes.</li>
		              </ul>
		            </div>
		          </details>

		          <details class="spec">
		            <summary>3) Emergency Contact</summary>
		            <div class="specBody">
		              <h4>Purpose</h4>
		              <ul>
		                <li>Capture a trusted emergency contact who should be notified in a medical crisis.</li>
		              </ul>

		              <h4>View Mode</h4>
		              <ul>
		                <li>When empty, the section shows <b>None</b>.</li>
		                <li>When filled, the section shows a table; empty optional values render as “–”.</li>
		                <li>For <b>Existing</b>, an empty Emergency Contact shows a warning banner.</li>
		              </ul>

		              <h4>Edit Mode</h4>
		              <ul>
		                <li>Apply saves and returns to view mode; Cancel prompts if there are unsaved changes.</li>
		                <li>Remove Emergency Contact appears once any field has content and returns to empty view state after confirmation.</li>
		              </ul>

		              <h4>Required Fields</h4>
		              <ul>
		                <li>For <b>Existing</b>, the section is required.</li>
		                <li>For <b>Referral</b>, the section can be saved empty; once the user starts typing, required rules are enforced.</li>
		                <li>Required when enforced: Name, Address, City, State, ZIP, Cell phone. Relationship and County are optional.</li>
		              </ul>

		              <h4>Modals</h4>
		              <ul>
		                <li>Remove confirmation: “Are you sure you want to delete Emergency Contact?” with Delete/Cancel.</li>
		              </ul>
		            </div>
		          </details>

			          <details class="spec">
			            <summary>4) DCW Assignment</summary>
			            <div class="specBody">
			              <h4>Purpose</h4>
			              <ul>
			                <li>Add and manage up to 10 DCW assignments, with email lookup and per-entry deletion.</li>
			              </ul>

		              <h4>View Mode</h4>
		              <ul>
		                <li>When no entries exist, the section shows <b>No DCWs</b>.</li>
		                <li>When entries exist, the section shows a table grouped by DCW # (Email, Phone number, First name, Last name).</li>
		              </ul>

		              <h4>Edit Mode</h4>
		              <ul>
		                <li>Entering edit mode shows “No DCW’s assigned yet” and disabled Apply until the user presses “+ Add DCW”.</li>
		                <li>After the first add, each DCW is rendered as an entry card with a delete icon.</li>
		                <li>“+ Add DCW” remains visible and becomes disabled when 10 entries are present.</li>
		              </ul>

		              <h4>Required Fields</h4>
		              <ul>
		                <li>Each entry requires: Email (valid), Phone number, First name, Last name.</li>
		                <li>Phone/Name fields are disabled until an Email value is entered.</li>
		                <li>Adding an additional DCW requires existing entries to be valid.</li>
		              </ul>

		              <h4>Directory Search</h4>
		              <ul>
		                <li>Email supports directory lookup; selecting a match hydrates phone + first/last name.</li>
		                <li>Already-added DCWs do not appear in the list for other rows.</li>
		                <li>Clearing the Email via “×” clears the rest of the entry and disables dependent fields.</li>
		                <li>Deleting an entry re-numbers the remaining entries (DCW 1, DCW 2, …).</li>
		              </ul>
		            </div>
			          </details>

			          <details class="spec">
			            <summary>5) Candidate DCW Assignment</summary>
			            <div class="specBody">
			              <h4>Purpose</h4>
			              <ul>
			                <li>Track candidate assignments separately from DCWs with identical behavior and requirements.</li>
		              </ul>

			              <h4>View/Edit Mode</h4>
			              <ul>
			                <li>View mode shows <b>No Candidates</b> when empty; otherwise displays the grouped table.</li>
			                <li>Edit mode matches DCW Assignment with candidate-specific labels and “+ Add Candidate”.</li>
			              </ul>

			              <h4>Required Fields</h4>
			              <ul>
			                <li>Same as DCW Assignment: valid Email + Phone + First name + Last name per candidate entry.</li>
			              </ul>
			            </div>
			          </details>
		        </div>
		      </aside>
	    </div>
	  </div>

  <!-- Generic Modal -->
  <div class="modalOverlay" id="modalOverlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modalH">
        <h3 id="modalTitle">Confirm</h3>
      </div>
      <div class="modalB" id="modalText">Text</div>
      <div class="modalF" id="modalFooter"></div>
    </div>
  </div>

  <script src="js/data.js" defer></script>
  <script src="js/state.js" defer></script>
  <script src="js/utils.js" defer></script>
  <script src="js/modal.js" defer></script>
  <script src="js/ui-escape.js" defer></script>
  <script src="js/ui-fields.js" defer></script>
  <script src="js/ui-typeahead.js" defer></script>
  <script src="js/ui-clear.js" defer></script>
  <script src="js/sections/primary.js" defer></script>
  <script src="js/sections/informal.js" defer></script>
  <script src="js/sections/emergency.js" defer></script>
  <script src="js/sections/assign.js" defer></script>
  <script src="js/docs.js" defer></script>
  <script src="js/main.js" defer></script>
</body>
</html>
